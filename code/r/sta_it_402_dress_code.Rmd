---
title: "STA DressCode - SQA Qualifications"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    #vertical_layout: fill
    theme: bootstrap
    social: menu
 #   source_code: embed

---

<style>
  .wide_image{
      overflow-x:scroll;
      white-space: nowrap;
  }

  .wide_image img{
     max-width: none;
  }

</style>


```{r global-options, include = FALSE, cache = FALSE}

knitr::opts_chunk$set(out.width = '95%', fig.align = 'center',
                      echo = FALSE, warning = FALSE, message = FALSE)

# fig.dim = c(12, 5), out.height = '100%',
```

```{r libraries_and_utilities}

#library(tidyverse)
#library(ggtext)
#library(DBI)

#library(plotly)

library(knitr)
library(kableExtra)

# utilities & c.

knitr::read_chunk("base/sta_it_402_dc_interactive.r")

source("base/it-402-dc-data_initial_exploration-base.r")
source("base/common_interaction.r", local = knitr::knit_global())

# need to reduce font sizes here ...
dressCodeTheme <- dressCodeTheme +
        theme(plot.title = element_text(lineheight = 0.8, size = 11, colour = "grey50", face = "bold",
                                          margin = margin(t = 10, b = 10)),
              axis.text.y = element_markdown(size = 8),
              axis.text.x = element_text(size = 7.5, angle = 45, vjust = 0.5),
              axis.title = element_text(size = 10),
              legend.title = element_text(size = 9.5), legend.text = element_text(size = 8),
              strip.text = element_text(size = 10)
            )

```

```{r data_etl, cache = TRUE}

dbConn <- dbConnect(RSQLite::SQLite(), paste0(path_to_file_store, "/", "sqa-data-db.sqlite"))
#dbConn

source("base/sta_it_402_dc_data_etl.r", local = knitr::knit_global())
source("base/sta_it_402_dc_data_parsing.r", local = knitr::knit_global())

```



Sidebar {.sidebar}
=======================================================================

## Blah

blah, blah


Overview
=======================================================================

> SQA ...


## When is Computing Offered?

```{r, computing_offering_across_qualifications, fig.height = 2.2}
```


Gender Distribution {data-navmenu="Exploring the Data&nbsp;&ndash;&nbsp;Pupils"}
=======================================================================

Row {data-height=100}
-----------------------------------------------------------------------

> Change over time &ndash; __gender distribution__ across all subjects and qualifications, compared to gender distribution for computing subjects only.

Column
-----------------------------------------------------------------------

### All Subjects {data-width=480}


```{r, gender_distribution_overall, fig.height = 5.5}
```

### Computing {data-width=480}

```{r, gender_distribution_computing}
```

Column {data-height=150}
-----------------------------------------------------------------------

### Average gender distribution (across qualifications and over time)

```{r, summary_tables_gender_distribution_overall}
```

### Average gender distribution, computing only

```{r, summary_tables_gender_distribution_computing}
```


Subject Popularity {data-navmenu="Exploring the Data&nbsp;&ndash;&nbsp;Pupils"}
=======================================================================


Row {.tabset .tabset-fade}
-----------------------------------------------------------------------

### Top 5 Subjects

> __Subject popularity__ varies by gender and over time, as well as qualification and level or stage. These charts show subjects that fell within the top five selected by pupils each year for each qualification (excluding English and Maths). Relatively larger points indicate higher popularity for a particular qualification, and position on the horizontal axis how often a subject was selected across all qualifications over the years. For instance, 100% popularity (on the far right) indicates a subject was in the top 5 every year from 1986 and for all qualifications. Subject popularity overall is also ordered top to bottom.

```{=html}
<hr width = "85%" hlign = "center" />
<p><br /></p>

```

####

```{r, top_5_subjects_overall, fig.height = 6, fig.width = 9}
```


### Computing Subjects

#### Gender Distribution across all Qualifications

```{r, computing_uptake_over_time}
```

####  Gender Distribution by Qualification

```{r, computing_uptake_over_time_by_qualification}
```


### Computing vs. English &amp; Maths

#### Subject Takeup Overall

<div class="wide_image">

```{r, computing_uptake_over_time_cf_english_maths_summary}
```
</div>


#### Gender Distribution

<div class="wide_image">

```{r, computing_uptake_over_time_cf_english_maths}
```
</div>


### Computing vs. Science Subjects

#### Subject Takeup Overall 

<div class="wide_image">

```{r, computing_uptake_over_time_cf_sciences_summary}
```
</div>


#### Gender Distribution

<div class="wide_image">

```{r, computing_uptake_over_time_cf_sciences}
```
</div>

```
{=html}
<p>&nbsp;<br /></p>

```


Variation across Locations {data-navmenu="Exploring the Data&nbsp;&ndash;&nbsp;Pupils"}
=======================================================================

Row {.tabset .tabset-fade}
-----------------------------------------------------------------------

### By Year

### Changes ...

```{r}

```




Gender Distribution {data-navmenu="Exploring the Data&nbsp;&ndash;&nbsp;Teachers"}
=======================================================================

Row {.tabset .tabset-fade}
-----------------------------------------------------------------------

### Overall


```{r}
# cleanup ...

dbDisconnect(dbConn)
#dbConn

```
